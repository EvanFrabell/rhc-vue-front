import{Q as u,a as d,b as c}from"./QCard.75d55c5b.js";import{g as n,G as p,s as f,a as h,_,o as m,c as g,b as r,w as l,d as s,e as b,Q as w,t as y,f as v,h as V}from"./index.dd2daae5.js";import{B as x,V as k,U as I,K as Q,w as S}from"./index.esm2017.77e38a2e.js";var U={name:"Login",data(){return{email:"",password:"",error:""}},methods:{async signIn(){try{const o=n(),e=new p,t=await f(o,e);console.log(t),this.fetchSubscription()}catch(o){console.log(o.message),alert("There was an issue logging into your account.  Please email support team.")}},async login(){try{const o=n(),e=await h(o,this.email,this.password);console.log({user:e}),this.fetchSubscription()}catch(o){o.message=="Firebase: Error (auth/user-not-found)."?alert("Email has not been registered."):o.message=="Firebase: Error (auth/wrong-password)."&&alert("Incorrect username or password.")}},async fetchSubscription(){this.isLoading=!0;const o=x(),e=k(o,"customers",n().currentUser.uid,"subscriptions"),t=I(e,Q("status","in",["trialing","active","past_due","unpaid"]));this.subscription=await S(t).then(i=>i.docs.length>0?i.docs[0].data():null),this.isLoading=!1,this.subscription==null?(console.log("You are NOT subscribed!!!"),alert("Your subscription has expired or has not started.  Redirecting to your Account page."),this.$router.replace({name:"Account"})):(console.log("You are subscribed!!!"),this.$router.replace({name:"Dashboard"}))}}},B="/assets/login-house.d481d7e1.jpg";const C={class:"login"},E=s("img",{src:B,class:"house",rel:"preload"},null,-1),P=s("h2",{class:"form-title"},"Real Home Compare",-1),$=s("p",{class:"form-info"},"Please enter your login and password!",-1),A={class:"form_inputs"},N={class:"email",style:{"background-color":"white"}},L={class:"password",style:{"background-color":"white"}},z=s("p",{class:"forgot-password"},[s("a",{href:"#!"},"Forgot password?")],-1),D={class:"social-logins"},F=s("i",{class:"fab fa-google fa-lg"},null,-1),R=[F],T={key:0,class:"error"},Y=s("p",{class:""},[V(" Don't have an account? "),s("a",{href:"#!",class:"signup"},"Sign Up")],-1);function j(o,e,t,i,G,K){return m(),g("section",C,[E,r(u,{class:"login-card text-white"},{default:l(()=>[r(d,null,{default:l(()=>[s("div",null,[s("form",{class:"login_form",onSubmit:e[3]||(e[3]=b((...a)=>o.login&&o.login(...a),["prevent"]))},[P,$,s("div",A,[s("div",N,[r(c,{filled:"",label:"Email",modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=a=>o.email=a),type:"email",id:"login-email"},null,8,["modelValue"])]),s("div",L,[r(c,{filled:"",modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",id:"login-password",label:"Password"},null,8,["modelValue"])])]),z,r(w,{outline:"",color:"white",class:"login-btn",label:"Login",type:"submit"}),s("div",D,[s("a",{href:"#!",onClick:e[2]||(e[2]=(...a)=>o.signIn&&o.signIn(...a))},R)])],32),o.error?(m(),g("div",T,y(o.error.message)+" 1234",1)):v("",!0)])]),_:1}),r(d,null,{default:l(()=>[Y]),_:1})]),_:1})])}var O=_(U,[["render",j]]);export{O as default};
